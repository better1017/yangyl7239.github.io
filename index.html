<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/logo.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.ico">
  <link rel="mask-icon" href="/images/logo.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ylyang999.gitee.io","root":"/","scheme":"Gemini","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="杨远林的个人博客">
<meta property="og:url" content="https://ylyang999.gitee.io/index.html">
<meta property="og:site_name" content="杨远林的个人博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ylyang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ylyang999.gitee.io/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>杨远林的个人博客</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">杨远林的个人博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">ylyang's blogs</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ylyang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">63</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </header>

      
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content index posts-expand">
          
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/28/Volatile%E5%92%8CJMM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/28/Volatile%E5%92%8CJMM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7/" class="post-title-link" itemprop="url">Volatile和JMM内存模型的可见性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-28 20:15:57" itemprop="dateCreated datePublished" datetime="2019-09-28T20:15:57+08:00">2019-09-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-16 20:30:48" itemprop="dateModified" datetime="2020-07-16T20:30:48+08:00">2020-07-16</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>JUC（java.util.concurrent）<ul>
<li>进程和线程<ul>
<li>进程：后台运行的程序（我们打开的一个软件，就是进程）</li>
<li>线程：轻量级的进程，并且一个进程包含多个线程（同在一个软件内，同时运行窗口，就是线程）</li>
</ul>
</li>
<li>并发和并行<ul>
<li>并发：同时访问某个东西，就是并发</li>
<li>并行：一起做某些事情，就是并行</li>
</ul>
</li>
</ul>
</li>
<li>JUC下的三个包<ul>
<li>java.util.concurrent<ul>
<li>java.util.concurrent.atomic</li>
<li>java.util.concurrent.locks</li>
</ul>
</li>
</ul>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/09/28/Volatile%E5%92%8CJMM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/27/hadoop-NameNode%E5%92%8CSecondaryNameNode%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6%E8%AE%B2%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/27/hadoop-NameNode%E5%92%8CSecondaryNameNode%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6%E8%AE%B2%E8%A7%A3/" class="post-title-link" itemprop="url">hadoop - NameNode和SecondaryNameNode工作机制讲解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-27 21:00:22 / 修改时间：21:01:42" itemprop="dateCreated datePublished" datetime="2019-09-27T21:00:22+08:00">2019-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-流程图如下："><a href="#1-流程图如下：" class="headerlink" title="1. 流程图如下："></a>1. 流程图如下：</h2><p><img src="https://upload-images.jianshu.io/upload_images/15108298-5f345cec02de9258.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h2 id="2-FSImage和Edits"><a href="#2-FSImage和Edits" class="headerlink" title="2. FSImage和Edits"></a>2. FSImage和Edits</h2><p>nodenode是HDFS的大脑,它维护着整个文件系统的目录树,以及目录树里所有的文件和目录,这些信息以俩种文件存储在文件系统:一种是命名空间镜像(也称为文件系统镜像,File System Image,FSImage),即HDFS元数据的完整快照,每次NameNode启动的时候,默认会加载最新的命名空间镜像,另一种是命令空间镜像的编辑日志(Edit log)。</p>
<p>FSImage文件其实是文件系统元数据的一个永久性检查点，但并非每一个写操作都会更新这个文件，因为FSImage是一个大型文件，如果频繁地执行写操作，会使系统运行极为缓慢。解决方案是NameNode只将改动内容预写日志，即写入命名空间镜像的编辑日志。随着时间的推移，编辑日志会变得越来越大，那么一旦发生故障，将会话费非常多的时间来回滚操作，所以就像传统的关系数据库一样，需要定期地合并FSImage和编辑日志。如果由NameNode来做合并操作，那么NameNode在为集群提供服务时可能无法提供足够的资源，为了彻底解决这一问题，SecondaryNameNode应允而生。</p>
<h2 id="3-第一阶段：namenode-启动"><a href="#3-第一阶段：namenode-启动" class="headerlink" title="3. 第一阶段：namenode 启动"></a>3. 第一阶段：namenode 启动</h2><p>（1）第一次启动 namenode 格式化后，创建 fsimage 和 edits 文件。如果不是第一次启动，直接加载编辑日志和镜像文件到内存。<br>（2）客户端对元数据进行增删改的请求。<br>（3）namenode 记录操作日志，更新滚动日志。<br>（4）namenode 在内存中对数据进行增删改查。</p>
<h2 id="4-第二阶段：SecondaryNameNode-工作"><a href="#4-第二阶段：SecondaryNameNode-工作" class="headerlink" title="4. 第二阶段：SecondaryNameNode 工作"></a>4. 第二阶段：SecondaryNameNode 工作</h2><p>（1）SecondaryNameNode 询问 namenode 是否需要 checkpoint。直接带回 namenode 是否检查结果。<br>（2）Secondary NameNode 请求执行 checkpoint。<br>（3）Secondary NameNode引导namenode 滚动更新编辑正在写的 edits 日志。<br>（4） Secondary NameNode载入FSImage文件,回放编辑日志，将其合并到FSImage，将新的FSImage文件压缩后写入磁盘。<br>（5）拷贝 fsimage到 namenode。<br>（6）namenode 将 fsimage重新命名成 fsimage。</p>
<p>默认情况下，该过程每小时发生一次,或者当NameNode的编辑日志文件到达默认的64MB也会触发。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/27/hadoop-%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE%E8%BE%85%E5%8A%A9%E5%90%8D%E7%A7%B0%E8%8A%82%E7%82%B9-SecondaryNameNode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/27/hadoop-%E5%8D%95%E7%8B%AC%E9%85%8D%E7%BD%AE%E8%BE%85%E5%8A%A9%E5%90%8D%E7%A7%B0%E8%8A%82%E7%82%B9-SecondaryNameNode/" class="post-title-link" itemprop="url">hadoop - 单独配置辅助名称节点(SecondaryNameNode)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-27 21:00:09 / 修改时间：21:03:10" itemprop="dateCreated datePublished" datetime="2019-09-27T21:00:09+08:00">2019-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-修改hdfs-site-xml"><a href="#1-修改hdfs-site-xml" class="headerlink" title="1. 修改hdfs-site.xml"></a>1. 修改hdfs-site.xml</h2><p>执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /software/hadoop/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure>

<p>在hdfs-site.xml中添加：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;s138:9868&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-修改core-site-xml"><a href="#2-修改core-site-xml" class="headerlink" title="2. 修改core-site.xml"></a>2. 修改core-site.xml</h2><p>执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /software/hadoop/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure>

<p>在core-site.xml中添加：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;fs.checkpoint.period&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;60&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;fs.checkpoint.size&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;67108864&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>即可设置s138为辅助名称节点(SecondaryNameNode).</p>
<p>注意：要先stop-all.sh以后再进行配置，否则会出现两个SecondaryNameNode，原因如下：<br>如果不先停止，NameNode和SecondaryNameNode均在s135机器上已经启动了；<br>此时修改了配置文件，将SecondaryNameNode修改为s138后执行stop-all.sh停止hadoop，此时s135机器上的SecondaryNameNode进程是依然存在的；<br>原因就是执行stop-all.sh时，因配置已经被修改导致，s135机器上SecondaryNameNode进程未被停止，一直存在。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/27/hadoop-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/27/hadoop-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">hadoop - 常用命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-27 20:59:52 / 修改时间：21:02:22" itemprop="dateCreated datePublished" datetime="2019-09-27T20:59:52+08:00">2019-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>启动NameNode<br>hadoop-daemon.sh start namenode<br>hdfs –daemon start namenode<br>关闭NameNode<br>hadoop-daemon.sh stop namenode<br>hdfs –daemon stop  namenode</p>
<p>启动DataNode<br>hadoop-daemons.sh start datanode<br>hdfs –workers –daemon start datanode<br>关闭DataNode<br>hadoop-daemons.sh stop datanode<br>hdfs –workers –daemon stop datanode</p>
<p>启动SecondaryNameNode<br>hadoop-daemon.sh start secondarynamenode<br>hdfs –daemon start secondarynamenode<br>关闭SecondaryNameNode<br>hadoop-daemon.sh stop secondarynamenode<br>hdfs –daemon stop secondarynamenode</p>
<p>启动ResourceManager<br>yarn-daemon.sh start resourcemanager<br>yarn –daemon start resourcemanager<br>关闭ResourceManager<br>yarn-daemon.sh stop resourcemanager<br>yarn –daemon stop resourcemanager</p>
<p>启动NodeManager<br>yarn-daemons.sh start nodemanager<br>yarn –workers –daemon start nodemanager<br>关闭NodeManager<br>yarn-daemons.sh start nodemanager<br>yarn –workers –daemon start nodemanager</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/27/hadoop-%E8%8A%82%E7%82%B9%E7%9A%84%E6%9C%8D%E5%BD%B9%E5%92%8C%E9%80%80%E5%BD%B9%EF%BC%88HDFS%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/27/hadoop-%E8%8A%82%E7%82%B9%E7%9A%84%E6%9C%8D%E5%BD%B9%E5%92%8C%E9%80%80%E5%BD%B9%EF%BC%88HDFS%EF%BC%89/" class="post-title-link" itemprop="url">hadoop - 节点的服役和退役（HDFS）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-27 14:53:17 / 修改时间：21:02:39" itemprop="dateCreated datePublished" datetime="2019-09-27T14:53:17+08:00">2019-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-首先需要克隆一台主机"><a href="#1-首先需要克隆一台主机" class="headerlink" title="1. 首先需要克隆一台主机"></a>1. 首先需要克隆一台主机</h2><p>现在我这里已经有五台虚拟机，要克隆的目标主机为CentOS7-1810_04：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-69633cdb6b6b3546.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="当前状态"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-ff8b304683346a6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>启动集群后webUI如下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-35e43e0cc74216fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-202a912e93e344ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>把要克隆的目标虚拟机关机，在VMware上选中目标主机 -&gt; 右键 -&gt; 管理 -&gt; 克隆：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-fc03f42105d46933.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="右键 -&gt; 管理 -&gt; 克隆"></p>
<p>然后下一步，选择克隆自：虚拟机中的当前状态：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-a4a0c9f159c56224.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="克隆自虚拟机中的当前状态"></p>
<p>继续下一步，克隆方法选择：创建完整克隆：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-da50bcf7d741e751.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="创建完整克隆"></p>
<p>继续下一步，修改虚拟机名称和位置：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-8893efd52c0e8db2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="修改虚拟机名称和位置"></p>
<p>然后选择完成，很快就克隆完了：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-52efaffcb0c88935.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="克隆中"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-398e66a74d055999.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="克隆完成"></p>
<p>可以看到，现在有六台虚拟机了：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-395532d0b8272fcf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h2 id="2-修改新主机的IP和主机名等信息"><a href="#2-修改新主机的IP和主机名等信息" class="headerlink" title="2.修改新主机的IP和主机名等信息"></a>2.修改新主机的IP和主机名等信息</h2><p>执行命令<code>sudo vi /etc/hostname</code><br>修改主机名为：s140</p>
<p>执行命令<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-ens33</code><br>修改主机IP为：192.168.11.140</p>
<p>然后重启虚拟机<br>现在就可以用MobaXterm_Personal_11.1连接了。</p>
<h2 id="3-复制完全分布式文件夹full为高可用文件夹ha"><a href="#3-复制完全分布式文件夹full为高可用文件夹ha" class="headerlink" title="3. 复制完全分布式文件夹full为高可用文件夹ha"></a>3. 复制完全分布式文件夹full为高可用文件夹ha</h2><p>其实这里之所以扩展到六台主机是为了给后边的高可用做铺垫，所以需要在<code>/software/hadoop/etc/</code>目录下建一个指向ha文件夹的hadoop软链接。当前<code>/software/hadoop/etc/</code>目录下是这样的：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-413b0f77b718e628.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>依次执行如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xcall.sh "cp -rf /software/hadoop/etc/full /software/hadoop/etc/ha"</span><br><span class="line">xcall.sh "rm /software/hadoop/etc/hadoop"</span><br><span class="line">xcall.sh "ln -s /software/hadoop/etc/ha /software/hadoop/etc/hadoop"</span><br><span class="line">xcall.sh "ls -al /software/hadoop/etc/"</span><br></pre></td></tr></table></figure>



<p>现在/software/hadoop/etc目录下是这样的：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-6c53da80d79b87ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="/software/hadoop/etc目录"><br><img src="https://upload-images.jianshu.io/upload_images/15108298-f007a0257a756049.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h2 id="4-新建服役节点"><a href="#4-新建服役节点" class="headerlink" title="4. 新建服役节点"></a>4. 新建服役节点</h2><p>连接建立成功了，现在开始把新节点服役到集群上，因为新主机是从以前的主机拷贝来的，所以能够进行绵密需要删除以前的信息，在s135上依次执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /tmp/*</span><br><span class="line">rm -rf /software/hadoop/logs/*</span><br><span class="line">rm -rf ~/hadoop/*</span><br></pre></td></tr></table></figure>

<p>这样主机就变成一个新的主机了，接下来开始配置节点服役：<br>在/software/hadoop/etc目录下新建白名单文件include.hosts<br>执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi include.hosts</span><br></pre></td></tr></table></figure>



<p>白名单文件s201:/software/hadoop/etc/include.hosts内容为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s136</span><br><span class="line">s137</span><br><span class="line">s138</span><br><span class="line">s139</span><br><span class="line">s140  //新添加的</span><br></pre></td></tr></table></figure>

<p>在hdfs-site.xml文件中添加属性：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;dfs.hosts&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;/soft/hadoop/etc/dfs.include.txt&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>在nn上刷新节点，执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -refreshNodes</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/15108298-95b3a0e8005c74b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>在/software/hadoop/etc/hadoop/works文件中添加新节点ip(主机名)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s135</span><br><span class="line">s136</span><br><span class="line">s137</span><br><span class="line">s138</span><br><span class="line">s139</span><br><span class="line">s140   //新添加的</span><br></pre></td></tr></table></figure>

<p>分发一下hdfs-site.xml文件和works文件（保证每个主机上的配置文件一样）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-41ed6d3e2d23e8ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>单独启动新的节点s140中的datanode和rm</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop-daemon.sh start datanode</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-1a01ecca17e297b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>刷新webUI，此时：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-2fc07581e979effc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>节点已经变成了五个，服役成功！</p>
<h2 id="5-节点的退役"><a href="#5-节点的退役" class="headerlink" title="5. 节点的退役"></a>5. 节点的退役</h2><p>这里要把s139和s140都退役，<br>添加退役节点的ip到黑名单software/hadoop/etc/exclude.hosts，不要更新白名单：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s139</span><br><span class="line">s140</span><br></pre></td></tr></table></figure>

<p>配置hdfs-site.xml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;dfs.hosts.exclude&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;/soft/hadoop/etc/dfs.hosts.exclude.txt&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>刷新NN节点和NM节点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -refreshNodes</span><br><span class="line">yarn rmadmin -refreshNodes</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/15108298-fe14391298fc02c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>查看webUI，节点状态在Decommisstioning</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-2cb3d2bcdc56bde9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>继续刷新webUI，当显示为如下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-741ede8a2b31c7b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>说明s139和s140已经退役成功。<br>（此时如果想要他们重新服役，只需要在黑名单中删除并重新刷新hdfs和yarn即可）</p>
<p>然后从白名单s135:/software/hadoop/etc/include.hosts删除已经退役的节点，并再次刷新节点：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -refreshNodes</span><br><span class="line">yarn rmadmin -refreshNodes</span><br></pre></td></tr></table></figure>

<p>最后从works文件中删除退役节点。<br>再刷新webUI，显示如下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-f548f6d6ad8da0a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>退役成功。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/27/hadoop-%E9%85%8D%E7%BD%AE%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%A8%A1%E5%BC%8F%E5%B9%B6%E8%BF%90%E8%A1%8CWordCount%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/27/hadoop-%E9%85%8D%E7%BD%AE%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E6%A8%A1%E5%BC%8F%E5%B9%B6%E8%BF%90%E8%A1%8CWordCount%E7%A8%8B%E5%BA%8F/" class="post-title-link" itemprop="url">hadoop - 配置完全分布式模式并运行WordCount程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-27 11:20:32 / 修改时间：11:21:24" itemprop="dateCreated datePublished" datetime="2019-09-27T11:20:32+08:00">2019-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><ol>
<li>Hadoop三种模式便捷切换以及让命令行提示符显式完整路径<br>（1）Hadoop三种模式便捷切换<br>首先执行如下命令：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big etc]$ cp -r hadoop local</span><br><span class="line">[yylin@big etc]$ cp -r hadoop pseudo</span><br><span class="line">[yylin@big etc]$ cp -r hadoop full</span><br><span class="line">[yylin@big etc]$ rm -rf hadoop</span><br><span class="line">[yylin@big etc]$ ln -s pseudo hadoop</span><br></pre></td></tr></table></figure>
上面几条命令的结果是，将原有的hadoop文件夹复制三份，分别命名为local、pseudo和full，代表本地模式、伪分布式模式以及完全分布式模式，然后删除原有的hadoop文件夹，再创建hadoop符号链接指向pseudo文件夹。<br>这样做的好处是，如果想在这三种模式中切换的话，只需要修改hadoop符号链接指向不同的文件夹就好了。</li>
</ol>
</li>
</ul>
<p>（2）让命令行提示符显式完整路径<br>（a）编辑/etc目录下的profile文件，添加环境变量PS1<br>  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PS1='[\u@\h `pwd`]\$'</span><br></pre></td></tr></table></figure><br>（b）生效，执行命令<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></p>
<ul>
<li><ol start="2">
<li>配置Hadoop伪分布式模式</li>
</ol>
</li>
</ul>
<p>（1）进入${HADOOP_HOME}/etc/hadoop目录，在该目录下有好多文件，主要需要配置的是四个文件，分别是core-site.xml、hdfs-site.xml、mapred-site.xml和yarn-site.xml。<br><img src="https://upload-images.jianshu.io/upload_images/15108298-bd34ae87a6a25fc1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>从图中看到，没有mapred-site.xml，有个mapred-site.xml.template，复制并重命名为mapred-site.xml即可。<br>（2）编辑core-site.xml：<br>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://s135/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>（3）编辑hdfs-site.xml，可以看到副本数为3：<br>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置hadoop.tmp.dir目录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/yylin/hadoop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>（4）编辑mapred-site.xml：<br>注意:cp mapred-site.xml.template mapred-site.xml<br>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>（5）编辑yarn-site.xml：<br>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>s135<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><ol start="3">
<li>配置SSH</li>
</ol>
</li>
</ul>
<p>（1）检查是否安装了ssh相关软件包(openssh-server + openssh-clients + openssh)<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big hadoop]$ yum <span class="built_in">list</span> installed | grep ssh</span><br></pre></td></tr></table></figure><br><img src="https://upload-images.jianshu.io/upload_images/15108298-72d2dda241584a36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>（2）检查是否启动了sshd进程<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big hadoop]$ ps -Af | grep sshd</span><br></pre></td></tr></table></figure><br><img src="https://upload-images.jianshu.io/upload_images/15108298-b3c4d50f7ab94f73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>（3）在client侧生成公私秘钥对。<br>  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big ~]$ ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><br><img src="https://upload-images.jianshu.io/upload_images/15108298-680b37d97a122282.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>（4）生成~/.ssh文件夹，里面有id_rsa(私钥) + id_rsa.pub(公钥)<br><img src="https://upload-images.jianshu.io/upload_images/15108298-984f5579f7349a84.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>（5）追加公钥到~/.ssh/authorized_keys文件中(文件名、位置固定)<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big ~]$ cd ~/.ssh</span><br><span class="line">[yylin@big .ssh]$ cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure><br><img src="https://upload-images.jianshu.io/upload_images/15108298-d251817e0b891f38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>（6）修改authorized_keys的权限为644.<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big .ssh]$ chmod <span class="number">644</span> authorized_keys</span><br></pre></td></tr></table></figure><br><img src="https://upload-images.jianshu.io/upload_images/15108298-f5d2eeb48ce436a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>（7）测试<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big .ssh]$ ssh localhost</span><br></pre></td></tr></table></figure><br><img src="https://upload-images.jianshu.io/upload_images/15108298-7a2de01e6b3a7791.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><img src="https://upload-images.jianshu.io/upload_images/15108298-e41e5f8db9255bcc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>（8）格式化名称节点<br>运行命令：<code>hdfs namenode -format</code></p>
<blockquote>
<p>到此为止，完全分布模式配置成功。</p>
</blockquote>
<p>（9）启动Hadoop服务<br>执行命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br></pre></td></tr></table></figure>
<p>启动namenodes、datanodes、secondary namenodes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-yarn.sh</span><br></pre></td></tr></table></figure>
<p>启动resourcemanager、nodemanagers<br>（10）浏览器访问namenode节点<br><code>http://s135:9870</code><br>可以看到hadoop的信息<br><img src="https://upload-images.jianshu.io/upload_images/15108298-d6d24af8437191c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<ul>
<li><ol start="4">
<li>运行WordCount入门程序</li>
</ol>
</li>
</ul>
<p>（1）WordCount程序介绍<br>WordCount是hadoop学习的helloword级别的练习程序，可以统计英文单词的数目，在hadoop中有此示例程序，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.hadoop.examples;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.StringTokenizer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.util.GenericOptionsParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TokenizerMapper</span> </span></span><br><span class="line"><span class="class">       <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">Object</span>, <span class="title">Text</span>, <span class="title">Text</span>, <span class="title">IntWritable</span>&gt;</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> IntWritable one = <span class="keyword">new</span> IntWritable(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">private</span> Text word = <span class="keyword">new</span> Text();</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(Object key, Text value, Context context</span></span></span><br><span class="line"><span class="function"><span class="params">                    )</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">      StringTokenizer itr = <span class="keyword">new</span> StringTokenizer(value.toString());</span><br><span class="line">      <span class="keyword">while</span> (itr.hasMoreTokens()) &#123;</span><br><span class="line">        word.set(itr.nextToken());</span><br><span class="line">        context.write(word, one);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntSumReducer</span> </span></span><br><span class="line"><span class="class">       <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>,<span class="title">IntWritable</span>,<span class="title">Text</span>,<span class="title">IntWritable</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IntWritable result = <span class="keyword">new</span> IntWritable();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;IntWritable&gt; values, </span></span></span><br><span class="line"><span class="function"><span class="params">                       Context context</span></span></span><br><span class="line"><span class="function"><span class="params">                       )</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (IntWritable val : values) &#123;</span><br><span class="line">        sum += val.get();</span><br><span class="line">      &#125;</span><br><span class="line">      result.set(sum);</span><br><span class="line">      context.write(key, result);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Configuration conf = <span class="keyword">new</span> Configuration();</span><br><span class="line">    String[] otherArgs = <span class="keyword">new</span> GenericOptionsParser(conf, args).getRemainingArgs();</span><br><span class="line">    <span class="keyword">if</span> (otherArgs.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">      System.err.println(<span class="string">"Usage: wordcount &lt;in&gt; [&lt;in&gt;...] &lt;out&gt;"</span>);</span><br><span class="line">      System.exit(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Job job = Job.getInstance(conf, <span class="string">"word count"</span>);</span><br><span class="line">    job.setJarByClass(WordCount<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    job.setMapperClass(TokenizerMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    job.setCombinerClass(IntSumReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    job.setReducerClass(IntSumReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    job.setOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    job.setOutputValueClass(IntWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; otherArgs.length - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">      FileInputFormat.addInputPath(job, <span class="keyword">new</span> Path(otherArgs[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    FileOutputFormat.setOutputPath(job,</span><br><span class="line">      <span class="keyword">new</span> Path(otherArgs[otherArgs.length - <span class="number">1</span>]));</span><br><span class="line">    System.exit(job.waitForCompletion(<span class="keyword">true</span>) ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将代码拷入工程中。<br>接下来用Maven构建工程，用idea导出jar包。<br>idea的pom.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>nwpu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>WordCount<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">appendAssemblyId</span>&gt;</span>false<span class="tag">&lt;/<span class="name">appendAssemblyId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">descriptorRef</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--注意，此处必须是main()方法对应类的完整路径  --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>org.apache.hadoop.examples.WordCountAPP<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>make-assembly<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>assembly<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后导出jar包<br><img src="https://upload-images.jianshu.io/upload_images/15108298-9c8dda6ceb0d4f96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>依次点击idea右侧栏的maven-&gt;WordCount-&gt;Lifecycle-&gt;(clean compile package install)，即可生成jar包，目录如下：<br><img src="https://upload-images.jianshu.io/upload_images/15108298-34dbe6924561f855.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>jar包导入服务器上，hello.txt文件put到hdfs文件系统上：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put input &#x2F;user&#x2F;yylin&#x2F;</span><br></pre></td></tr></table></figure>
<p>运行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop jar WordCount-1.0-SNAPSHOT.jar &#x2F;user&#x2F;yylin&#x2F;input &#x2F;user&#x2F;yylin&#x2F;output</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-d40c16dbb8cd20c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><img src="https://upload-images.jianshu.io/upload_images/15108298-b5da3afcfb2f240a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><img src="https://upload-images.jianshu.io/upload_images/15108298-f087230b866e3c07.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<blockquote>
<p>成功了。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/09/27/hadoop-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%88%E5%AE%89%E8%A3%85JDK-%E5%AE%89%E8%A3%85hadoop-%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E6%A8%A1%E5%BC%8F%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/27/hadoop-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%88%E5%AE%89%E8%A3%85JDK-%E5%AE%89%E8%A3%85hadoop-%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E6%A8%A1%E5%BC%8F%EF%BC%89/" class="post-title-link" itemprop="url">hadoop - 环境搭建（安装JDK+安装hadoop+配置本地模式）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-27 11:13:41 / 修改时间：11:16:11" itemprop="dateCreated datePublished" datetime="2019-09-27T11:13:41+08:00">2019-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><ol>
<li>安装JDK<br>a) 下载jdk-8u65-linux-x64.tar.gz<br>b)上传并tar开 <figure class="highlight plain"><figcaption><span>cd ~```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;$ mkdir downloads</span><br></pre></td></tr></table></figure>
c)利用FileZilla把<code>jdk-8u65-linux-x64.tar.gz</code>上传到~/downloads/目录下 <figure class="highlight plain"><figcaption><span>cd ~/downloads/```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;$ cd ls</span><br></pre></td></tr></table></figure>
<img src="https://upload-images.jianshu.io/upload_images/15108298-720a949c4030a0b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt> <figure class="highlight plain"><figcaption><span>tar -zxvf jdk-8u65-linux-x64.tar.gz```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;15108298-a785cd1842531953.png?imageMogr2&#x2F;auto-orient&#x2F;strip%7CimageView2&#x2F;2&#x2F;w&#x2F;1240)</span><br><span class="line">d)创建&#x2F;soft文件夹</span><br><span class="line">  &#96;&#96;&#96;$ sudo mkdir &#x2F;soft</span><br></pre></td></tr></table></figure>
<img src="https://upload-images.jianshu.io/upload_images/15108298-acd1c2b91be3e01a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt> <figure class="highlight plain"><figcaption><span>sudo chown yylin:yylin</span><a href="/soft```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;15108298-3affa1cf0d2e7557.png?imageMogr2&#x2F;auto-orient&#x2F;strip%7CimageView2&#x2F;2&#x2F;w&#x2F;1240)</span><br><span class="line">e)移动tar开的文件到&#x2F;soft下</span><br><span class="line">  &#96;&#96;&#96;$ mv ~&#x2F;downloads&#x2F;jdk1.8.0_65 &#x2F;soft&#x2F;</span><br></pre></td></tr></table></figure>
<img src="https://upload-images.jianshu.io/upload_images/15108298-72e51ebd3bbcfe79.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>f)创建符号连接 <figure class="highlight plain"><figcaption><span>ln -s</span><a href="/soft/jdk1.8.0_65">/soft/jdk```</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;15108298-cf7c7d295e853364.png?imageMogr2&#x2F;auto-orient&#x2F;strip%7CimageView2&#x2F;2&#x2F;w&#x2F;1240)</span><br><span class="line">g)验证jdk安装是否成功</span><br><span class="line">  &#96;&#96;&#96;$ cd &#x2F;soft&#x2F;jdk&#x2F;bin</span><br></pre></td></tr></table></figure>
 <figure class="highlight plain"><figcaption><span>./java -version```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">![](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;15108298-124d0fc1c1aa25f3.png?imageMogr2&#x2F;auto-orient&#x2F;strip%7CimageView2&#x2F;2&#x2F;w&#x2F;1240)</span><br><span class="line">出现java版本信息，说明安装成功，接下来配置环境变量。</span><br><span class="line">h)配置java环境变量</span><br><span class="line">（1）编辑&#x2F;etc&#x2F;profile</span><br><span class="line">  &#96;&#96;&#96;$ sudo vi &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>
在profile文件最后加上下面两行<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">export</span> JAVA_HOME=/soft/jdk</span><br><span class="line">exprot PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure>
（2）使环境变量即刻生效 <figure class="highlight plain"><figcaption><span>source</span><a href="/etc/profile```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（3）进入任意目录下,测试是否ok</span><br><span class="line"> &#96;&#96;&#96;$ cd ~</span><br></pre></td></tr></table></figure>
 <figure class="highlight plain"><figcaption><span>java -version```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    ![](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;15108298-537f42cc39035543.png?imageMogr2&#x2F;auto-orient&#x2F;strip%7CimageView2&#x2F;2&#x2F;w&#x2F;1240)</span><br><span class="line">    出现java版本信息，说明JDK环境变量配置成功。</span><br><span class="line"></span><br><span class="line">* 2. 安装Hadoop</span><br><span class="line">    （1）安装hadoop</span><br><span class="line">    a)下载 [hadoop-2.7.7.tar.gz](https:&#x2F;&#x2F;www-eu.apache.org&#x2F;dist&#x2F;hadoop&#x2F;common&#x2F;hadoop-2.7.7&#x2F;hadoop-2.7.7.tar.gz)</span><br><span class="line">    b)上传并tar开</span><br><span class="line">    &#96;&#96;&#96;c++</span><br><span class="line">      [yylin@big ~]$ cd ~&#x2F;downloads&#x2F;</span><br><span class="line">      [yylin@big downloads]$ ll</span><br><span class="line">      total 390612</span><br><span class="line">      -rw-rw-r--. 1 yylin yylin 218720521 May  7 17:36 hadoop-2.7.7.tar.gz</span><br><span class="line">      -rw-rw-r--. 1 yylin yylin 181260798 May  3 19:32 jdk-8u65-linux-x64.tar.gz</span><br><span class="line">      [yylin@big downloads]$ tar -zxvf hadoop-2.7.7</span><br><span class="line">      ......</span><br><span class="line">      [yylin@big downloads]$ ll</span><br><span class="line">      total 390612</span><br><span class="line">      drwxr-xr-x. 9 yylin yylin       149 Jul 19  2018 hadoop-2.7.7</span><br><span class="line">      -rw-rw-r--. 1 yylin yylin 218720521 May  7 17:36 hadoop-2.7.7.tar.gz</span><br><span class="line">      -rw-rw-r--. 1 yylin yylin 181260798 May  3 19:32 jdk-8u65-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>
c)移动tar开的文件到/soft下，并创建符号连接<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big downloads]$ mv ~/downloads/hadoop<span class="number">-2.7</span><span class="number">.7</span> /soft/</span><br><span class="line">[yylin@big downloads]$ cd /soft/</span><br><span class="line">[yylin@big soft]$ ll</span><br><span class="line">total <span class="number">0</span></span><br><span class="line">drwxr-xr-x. <span class="number">9</span> yylin yylin <span class="number">149</span> Jul <span class="number">19</span>  <span class="number">2018</span> hadoop<span class="number">-2.7</span><span class="number">.7</span></span><br><span class="line">lrwxrwxrwx. <span class="number">1</span> yylin yylin  <span class="number">18</span> May  <span class="number">6</span> <span class="number">21</span>:<span class="number">31</span> jdk -&gt; /soft/jdk1<span class="number">.8</span><span class="number">.0</span>_65/</span><br><span class="line">drwxr-xr-x. <span class="number">8</span> yylin yylin <span class="number">255</span> Oct  <span class="number">7</span>  <span class="number">2015</span> jdk1<span class="number">.8</span><span class="number">.0</span>_65</span><br><span class="line">[yylin@big soft]$ ln -s /soft/hadoop<span class="number">-2.7</span><span class="number">.7</span> /soft/hadoop</span><br><span class="line">[yylin@big soft]$ ll</span><br><span class="line">total <span class="number">0</span></span><br><span class="line">lrwxrwxrwx. <span class="number">1</span> yylin yylin  <span class="number">18</span> May  <span class="number">7</span> <span class="number">17</span>:<span class="number">45</span> hadoop -&gt; /soft/hadoop<span class="number">-2.7</span><span class="number">.7</span></span><br><span class="line">drwxr-xr-x. <span class="number">9</span> yylin yylin <span class="number">149</span> Jul <span class="number">19</span>  <span class="number">2018</span> hadoop<span class="number">-2.7</span><span class="number">.7</span></span><br><span class="line">lrwxrwxrwx. <span class="number">1</span> yylin yylin  <span class="number">18</span> May  <span class="number">6</span> <span class="number">21</span>:<span class="number">31</span> jdk -&gt; /soft/jdk1<span class="number">.8</span><span class="number">.0</span>_65/</span><br><span class="line">drwxr-xr-x. <span class="number">8</span> yylin yylin <span class="number">255</span> Oct  <span class="number">7</span>  <span class="number">2015</span> jdk1<span class="number">.8</span><span class="number">.0</span>_65</span><br></pre></td></tr></table></figure>
d)验证jdk安装是否成功（出现版本信息，说明安装成功）<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big hadoop]$ cd /soft/hadoop/bin/</span><br><span class="line">[yylin@big bin]$ ls</span><br><span class="line">container-executor  hadoop.cmd  hdfs.cmd  mapred.cmd  test-container-executor  yarn.cmd hadoop hdfs mapred rcc yarn</span><br><span class="line">[yylin@big bin]$ ./hadoop version</span><br><span class="line">Hadoop <span class="number">2.7</span><span class="number">.7</span></span><br><span class="line">Subversion Unknown -r c1aad84bd27cd79c3d1a7dd58202a8c3ee1ed3ac</span><br><span class="line">Compiled by stevel on <span class="number">2018</span><span class="number">-07</span><span class="number">-18</span>T22:<span class="number">47</span>Z</span><br><span class="line">Compiled with protoc <span class="number">2.5</span><span class="number">.0</span></span><br><span class="line">From source with checksum <span class="number">792e15</span>d20b12c74bd6f19a1fb886490</span><br><span class="line">This command was <span class="built_in">run</span> <span class="keyword">using</span> /soft/hadoop<span class="number">-2.7</span><span class="number">.7</span>/share/hadoop/common/hadoop-common<span class="number">-2.7</span><span class="number">.7</span>.jar</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<p>（2）配置hadoop环境变量<br>编辑/etc/profile文件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big bin]$ sudo vi /etc/profile</span><br></pre></td></tr></table></figure>
<p>在profile文件最后加上下面两行<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">export</span> HADOOP_HOME=/soft/hadoop</span><br><span class="line"><span class="keyword">export</span> PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure></p>
<p>（3）生效并测试<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[yylin@big bin]$ source /etc/profile</span><br><span class="line">[yylin@big bin]$ cd ~</span><br><span class="line">[yylin@big ~]$ hadoop version</span><br><span class="line">Hadoop <span class="number">2.7</span><span class="number">.7</span></span><br><span class="line">Subversion Unknown -r c1aad84bd27cd79c3d1a7dd58202a8c3ee1ed3ac</span><br><span class="line">Compiled by stevel on <span class="number">2018</span><span class="number">-07</span><span class="number">-18</span>T22:<span class="number">47</span>Z</span><br><span class="line">Compiled with protoc <span class="number">2.5</span><span class="number">.0</span></span><br><span class="line">From source with checksum <span class="number">792e15</span>d20b12c74bd6f19a1fb886490</span><br><span class="line">This command was <span class="built_in">run</span> <span class="keyword">using</span> /soft/hadoop<span class="number">-2.7</span><span class="number">.7</span>/share/hadoop/common/hadoop-common<span class="number">-2.7</span><span class="number">.7</span>.jar</span><br></pre></td></tr></table></figure><br>经过上述操作就搭建好了hadoop环境，到目前为止是本地模式（单机模式），接下来配置完全分布式模式。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/01/19/Linux%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/19/Linux%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Linux命令总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-19 20:21:15 / 修改时间：20:22:42" itemprop="dateCreated datePublished" datetime="2019-01-19T20:21:15+08:00">2019-01-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1.ls [选项] [目录名 | 列出相关目录下的所有目录和文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-a  列出包括.a开头的隐藏文件的所有文件</span><br><span class="line">-A  通-a，但不列出&quot;.&quot;和&quot;..&quot;</span><br><span class="line">-l  列出文件的详细信息</span><br><span class="line">-c  根据ctime排序显示</span><br><span class="line">-t  根据文件修改时间排序</span><br><span class="line">---color[&#x3D;WHEN] 用色彩辨别文件类型 WHEN 可以是&#39;never&#39;、&#39;always&#39;或&#39;auto&#39;其中之一</span><br><span class="line">   白色：表示普通文件</span><br><span class="line">   蓝色：表示目录</span><br><span class="line">   绿色：表示可执行文件</span><br><span class="line">   红色：表示压缩文件</span><br><span class="line">   浅蓝色：链接文件</span><br><span class="line">   红色闪烁：表示链接的文件有问题</span><br><span class="line">   黄色：表示设备文件</span><br><span class="line">   灰色：表示其它文件</span><br></pre></td></tr></table></figure>

<p>2.mv [选项] 源文件或目录 目录或多个源文件 | 移动或重命名文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-b  覆盖前做备份</span><br><span class="line">-f  如存在不询问而强制覆盖</span><br><span class="line">-i  如存在则询问是否覆盖</span><br><span class="line">-u  较新才覆盖</span><br><span class="line">-t  将多个源文件移动到统一目录下，目录参数在前，文件参数在后</span><br><span class="line">eg:</span><br><span class="line">   mv a &#x2F;tmp&#x2F; 将文件a移动到 &#x2F;tmp目录下</span><br><span class="line">   mv a b 将a命名为b</span><br><span class="line">   mv &#x2F;home&#x2F;zenghao test1.txt test2.txt test3.txt</span><br></pre></td></tr></table></figure>

<p>3.cp [选项] 源文件或目录 目录或多个源文件 | 将源文件复制至目标文件，或将多个源文件复制至目标目录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-r -R 递归复制该目录及其子目录内容</span><br><span class="line">-p  连同档案属性一起复制过去</span><br><span class="line">-f  不询问而强制复制</span><br><span class="line">-s  生成快捷方式</span><br><span class="line">-a  将档案的所有特性都一起复制</span><br></pre></td></tr></table></figure>

<p>4.scp [参数] [原路径] [目标路径] | 在Linux服务器之间复制文件和目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-v  详细显示输出的具体情况</span><br><span class="line">-r  递归复制整个目录</span><br><span class="line">(1) 复制文件：  </span><br><span class="line">命令格式：  </span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder  </span><br><span class="line">或者  </span><br><span class="line">scp local_file remote_username@remote_ip:remote_file  </span><br><span class="line">或者  </span><br><span class="line">scp local_file remote_ip:remote_folder  </span><br><span class="line">或者  </span><br><span class="line">scp local_file remote_ip:remote_file  </span><br><span class="line">第1,2个指定了用户名，命令执行后需要输入用户密码，第1个仅指定了远程的目录，文件名字不变，第2个指定了文件名  </span><br><span class="line">第3,4个没有指定用户名，命令执行后需要输入用户名和密码，第3个仅指定了远程的目录，文件名字不变，第4个指定了文件名   </span><br><span class="line">(2) 复制目录：  </span><br><span class="line">命令格式：  </span><br><span class="line">scp -r local_folder remote_username@remote_ip:remote_folder  </span><br><span class="line">或者  </span><br><span class="line">scp -r local_folder remote_ip:remote_folder  </span><br><span class="line">第1个指定了用户名，命令执行后需要输入用户密码；  </span><br><span class="line">第2个没有指定用户名，命令执行后需要输入用户名和密码；</span><br><span class="line">eg:</span><br><span class="line">   从 本地 复制到 远程</span><br><span class="line">   scp &#x2F;home&#x2F;daisy&#x2F;full.tar.gz root@172.19.2.75:&#x2F;home&#x2F;root </span><br><span class="line">   从 远程 复制到 本地</span><br><span class="line">   scp root@&#x2F;172.19.2.75:&#x2F;home&#x2F;root&#x2F;full.tar.gz &#x2F;home&#x2F;daisy&#x2F;full.tar.gz</span><br></pre></td></tr></table></figure>

<p>5.rm [选项] 文件 | 删除文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-r  删除文件夹</span><br><span class="line">-f  删除不提示</span><br><span class="line">-i  删除提示</span><br><span class="line">-v  详细显示进行步骤</span><br></pre></td></tr></table></figure>

<p>6.touch [选项] 文件 | 创建空文件或更新文件时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-a  只修改存取时间</span><br><span class="line">-m  值修改变动时间</span><br><span class="line">-r  eg:touch -r a b ,使b的时间和a相同</span><br><span class="line">-t  指定特定的时间 eg:touch -t 201211142234.50 log.log </span><br><span class="line">   -t time [[CC]YY]MMDDhhmm[.SS],C:年前两位</span><br></pre></td></tr></table></figure>

<p>7.pwd 查看当前所在路径</p>
<p>8.cd 改变当前目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- ：返回上次目录</span><br><span class="line">.. :返回上层目录</span><br><span class="line">回车  ：返回主目录</span><br><span class="line">&#x2F;   :根目录</span><br></pre></td></tr></table></figure>

<p>9.mkdir [选项] 目录… | 创建新目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-p  递归创建目录，若父目录不存在则依次创建</span><br><span class="line">-m  自定义创建目录的权限  eg:mkdir -m 777 hehe</span><br><span class="line">-v  显示创建目录的详细信息</span><br></pre></td></tr></table></figure>

<p>10.rmdir 删除空目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-v  显示执行过程</span><br><span class="line">-p  若自父母删除后父目录为空则一并删除</span><br></pre></td></tr></table></figure>

<p>11.rm [选项] 文件… | 一个或多个文件或目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-f  忽略不存在的文件，不给出提示</span><br><span class="line">-i  交互式删除</span><br><span class="line">-r  将列出的目录及其子目录递归删除</span><br><span class="line">-v  列出详细信息</span><br></pre></td></tr></table></figure>

<p>12.echo：显示内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-n  输出后不换行</span><br><span class="line">-e  遇到转义字符特殊处理  </span><br><span class="line">   eg:</span><br><span class="line">       echo &quot;hehe&quot;   显示hehe</span><br><span class="line">       ehco -e &quot;hehe&quot;    显示he(换行了)he</span><br></pre></td></tr></table></figure>

<p>13.cat [选项] [文件]..| 一次显示整个文件或从键盘创建一个文件或将几个文件合并成一个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-n  编号文件内容再输出</span><br><span class="line">-E  在结束行提示$</span><br></pre></td></tr></table></figure>

<p>14.tac | 反向显示</p>
<p>15.more | 按页查看文章内容，从前向后读取文件，因此在启动时就加载整个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+n  从第n行开始显示</span><br><span class="line">-n  每次查看n行数据</span><br><span class="line">+&#x2F;String    搜寻String字符串位置，从其前两行开始查看</span><br><span class="line">-c  清屏再显示</span><br><span class="line">-p  换页时清屏</span><br></pre></td></tr></table></figure>

<p>16.less | 可前后移动地逐屏查看文章内容，在查看前不会加载整个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-m  显示类似于more命令的百分比</span><br><span class="line">-N  显示行号</span><br><span class="line">&#x2F;   字符串：向下搜索“字符串”的功能</span><br><span class="line">?   字符串：向上搜索“字符串”的功能</span><br><span class="line">n   重复前一个搜索（与 &#x2F; 或 ? 有关）</span><br><span class="line">N   反向重复前一个搜索（与 &#x2F; 或 ? 有关）</span><br><span class="line">b   向后翻一页</span><br><span class="line">d   向后翻半页</span><br></pre></td></tr></table></figure>

<p>17.nl [选项]… [文件]… | 将输出内容自动加上行号 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-b </span><br><span class="line">-b a 不论是否有空行，都列出行号（类似 cat -n) </span><br><span class="line">-b t 空行则不列行号（默认） </span><br><span class="line">-n 有ln rn rz三个参数，分别为再最左方显示，最右方显示不加0，最右方显示加0</span><br></pre></td></tr></table></figure>

<p>18.head [参数]… [文件]… | 显示档案开头，默认开头10行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-v  显示文件名</span><br><span class="line">-c number   显示前number个字符,若number为负数,则显示除最后number个字符的所有内容</span><br><span class="line">-number&#x2F;n (+)number     显示前number行内容，</span><br><span class="line">-n number   若number为负数，则显示除最后number行数据的所有内容</span><br></pre></td></tr></table></figure>

<p>19.tail [必要参数] [选择参数] [文件] | 显示文件结尾内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-v  显示详细的处理信息</span><br><span class="line">-q  不显示处理信息</span><br><span class="line">-num&#x2F;-n (-)num      显示最后num行内容</span><br><span class="line">-n +num 从第num行开始显示后面的数据</span><br><span class="line">-c  显示最后c个字符</span><br><span class="line">-f  循环读取</span><br></pre></td></tr></table></figure>

<p>20.vi 编辑文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">:w filename 将文章以指定的文件名保存起来  </span><br><span class="line">:wq 保存并退出</span><br><span class="line">:q! 不保存而强制退出</span><br><span class="line">命令行模式功能键</span><br><span class="line">1）插入模式</span><br><span class="line">   按「i」切换进入插入模式「insert mode」，按&quot;i&quot;进入插入模式后是从光标当前位置开始输入文件；</span><br><span class="line">   按「a」进入插入模式后，是从目前光标所在位置的下一个位置开始输入文字；</span><br><span class="line">   按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。</span><br><span class="line"></span><br><span class="line">2）从插入模式切换为命令行模式</span><br><span class="line"> 按「ESC」键。</span><br><span class="line">3）移动光标</span><br><span class="line">　　vi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。</span><br><span class="line">　　按「ctrl」+「b」：屏幕往&quot;后&quot;移动一页。</span><br><span class="line">　　按「ctrl」+「f」：屏幕往&quot;前&quot;移动一页。</span><br><span class="line">　　按「ctrl」+「u」：屏幕往&quot;后&quot;移动半页。</span><br><span class="line">　　按「ctrl」+「d」：屏幕往&quot;前&quot;移动半页。</span><br><span class="line">　　按数字「0」：移到文章的开头。</span><br><span class="line">　　按「G」：移动到文章的最后。</span><br><span class="line">　　按「$」：移动到光标所在行的&quot;行尾&quot;。</span><br><span class="line">　　按「^」：移动到光标所在行的&quot;行首&quot;</span><br><span class="line">　　按「w」：光标跳到下个字的开头</span><br><span class="line">　　按「e」：光标跳到下个字的字尾</span><br><span class="line">　　按「b」：光标回到上个字的开头</span><br><span class="line">　　按「#l」：光标移到该行的第#个位置，如：5l,56l。</span><br><span class="line"></span><br><span class="line">4）删除文字</span><br><span class="line">　　「x」：每按一次，删除光标所在位置的&quot;后面&quot;一个字符。</span><br><span class="line">　　「#x」：例如，「6x」表示删除光标所在位置的&quot;后面&quot;6个字符。</span><br><span class="line">　　「X」：大写的X，每按一次，删除光标所在位置的&quot;前面&quot;一个字符。</span><br><span class="line">　　「#X」：例如，「20X」表示删除光标所在位置的&quot;前面&quot;20个字符。</span><br><span class="line">　　「dd」：删除光标所在行。</span><br><span class="line">　　「#dd」：从光标所在行开始删除#行</span><br><span class="line"></span><br><span class="line">5）复制</span><br><span class="line">　　「yw」：将光标所在之处到字尾的字符复制到缓冲区中。</span><br><span class="line">　　「#yw」：复制#个字到缓冲区</span><br><span class="line">　　「yy」：复制光标所在行到缓冲区。</span><br><span class="line">　　「#yy」：例如，「6yy」表示拷贝从光标所在的该行&quot;往下数&quot;6行文字。</span><br><span class="line">　　「p」：将缓冲区内的字符贴到光标所在位置。注意：所有与&quot;y&quot;有关的复制命令都必须与&quot;p&quot;配合才能完成复制与粘贴功能。</span><br><span class="line"></span><br><span class="line">6）替换</span><br><span class="line">　　「r」：替换光标所在处的字符。</span><br><span class="line">　　「R」：替换光标所到之处的字符，直到按下「ESC」键为止。</span><br><span class="line"></span><br><span class="line">7）回复上一次操作</span><br><span class="line">　　「u」：如果您误执行一个命令，可以马上按下「u」，回到上一个操作。按多次&quot;u&quot;可以执行多次回复。</span><br><span class="line"></span><br><span class="line">8）更改</span><br><span class="line">　　「cw」：更改光标所在处的字到字尾处</span><br><span class="line">　　「c#w」：例如，「c3w」表示更改3个字</span><br><span class="line"></span><br><span class="line">9）跳至指定的行</span><br><span class="line">　　「ctrl」+「g」列出光标所在行的行号。</span><br><span class="line">　　「#G」：例如，「15G」，表示移动光标至文章的第15行行首。</span><br></pre></td></tr></table></figure>

<p>21.which 可执行文件名称 | 查看可执行文件的位置，在PATH变量指定的路径中查看系统命令是否存在及其位置</p>
<p>22.whereis [-bmsu] [BMS 目录名 -f ] 文件名| 定位可执行文件、源代码文件、帮助文件在文件系统中的位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-b   定位可执行文件。</span><br><span class="line">-m   定位帮助文件。</span><br><span class="line">-s   定位源代码文件。</span><br><span class="line">-u   搜索默认路径下除可执行文件、源代码文件、帮助文件以外的其它文件。</span><br><span class="line">-B   指定搜索可执行文件的路径。</span><br><span class="line">-M   指定搜索帮助文件的路径。</span><br><span class="line">-S   指定搜索源代码文件的路径。</span><br></pre></td></tr></table></figure>

<p>23.locate | 通过搜寻数据库快速搜寻档案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-r  使用正规运算式做寻找的条件</span><br></pre></td></tr></table></figure>

<p>24.find find [PATH] [option] [action] | 在文件树种查找文件，并作出相应的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line">1. 与时间有关的选项：共有 -atime, -ctime 与 -mtime 和-amin,-cmin与-mmin，以 -mtime 说明</span><br><span class="line">   -mtime n ：n 为数字，意义为在 n 天之前的『一天之内』被更动过内容的档案；</span><br><span class="line">   -mtime +n ：列出在 n 天之前(不含 n 天本身)被更动过内容的档案档名；</span><br><span class="line">   -mtime -n ：列出在 n 天之内(含 n 天本身)被更动过内容的档案档名。</span><br><span class="line">   -newer file ：file 为一个存在的档案，列出比 file 还要新的档案档名</span><br><span class="line"></span><br><span class="line">2. 与使用者或组名有关的参数：</span><br><span class="line">   -uid n ：n 为数字，这个数字是用户的账号 ID，亦即 UID</span><br><span class="line">   -gid n ：n 为数字，这个数字是组名的 ID，亦即 GID</span><br><span class="line">   -user name ：name 为使用者账号名称！例如 dmtsai</span><br><span class="line">   -group name：name 为组名，例如 users ；</span><br><span class="line">   -nouser ：寻找档案的拥有者不存在 &#x2F;etc&#x2F;passwd 的人！</span><br><span class="line">   -nogroup ：寻找档案的拥有群组不存在于 &#x2F;etc&#x2F;group 的档案！</span><br><span class="line"></span><br><span class="line">3. 与档案权限及名称有关的参数：</span><br><span class="line">   -name filename：搜寻文件名为 filename 的档案（可使用通配符）</span><br><span class="line">   -size [+-]SIZE：搜寻比 SIZE 还要大(+)或小(-)的档案。这个 SIZE 的规格有：</span><br><span class="line">       c: 代表 byte</span><br><span class="line">       k: 代表 1024bytes。所以，要找比 50KB还要大的档案，就是『 -size +50k 』</span><br><span class="line">   -type TYPE ：搜寻档案的类型为 TYPE 的，类型主要有：</span><br><span class="line">       一般正规档案 (f)</span><br><span class="line">       装置档案 (b, c)</span><br><span class="line">       目录 (d)</span><br><span class="line">       连结档 (l)</span><br><span class="line">       socket (s)</span><br><span class="line">       FIFO (p)</span><br><span class="line">   -perm mode ：搜寻档案权限『刚好等于』 mode的档案，这个mode为类似chmod的属性值，举例来说，-rwsr-xr-x 的属性为4755！</span><br><span class="line">   -perm -mode ：搜寻档案权限『必须要全部囊括 mode 的权限』的档案，举例来说，</span><br><span class="line">       我们要搜寻-rwxr--r-- 亦即 0744 的档案，使用-perm -0744，当一个档案的权限为 -rwsr-xr-x ，亦即 4755 时，也会被列出来，因为 -rwsr-xr-x 的属性已经囊括了 -rwxr--r-- 的属性了。</span><br><span class="line">   -perm +mode ：搜寻档案权限『包含任一 mode 的权限』的档案，举例来</span><br><span class="line">       说，我们搜寻-rwxr-xr-x ，亦即 -perm +755 时，但一个文件属性为 -rw-------也会被列出来，因为他有 -rw.... 的属性存在！</span><br><span class="line">4. 额外可进行的动作：</span><br><span class="line">   -exec command ：command 为其他指令，-exec 后面可再接额外的指令来处理搜寻到的结果。</span><br><span class="line">   -print ：将结果打印到屏幕上，这个动作是预设动作！</span><br><span class="line">   eg:</span><br><span class="line">       find &#x2F; -perm +7000 -exec ls -l &#123;&#125; ; ,额外指令以-exec开头，以;结尾&#123;&#125;代替前面找到的内容</span><br><span class="line">   | xargs </span><br><span class="line">       -i  默认的前面输出用&#123;&#125;代替 </span><br><span class="line">       eg:</span><br><span class="line">           find . -name &quot;*.log&quot; | xargs -i mv &#123;&#125; test4</span><br></pre></td></tr></table></figure>

<p>25.grep ‘正则表达式’ 文件名 | 用正则表达式搜索文本，并把匹配的行打印出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-c  只输出匹配行的计数。</span><br><span class="line">-I  不区分大小写(只适用于单字符)。</span><br><span class="line">-l  只显示文件名</span><br><span class="line">-v  显示不包含匹配文本的所有行。</span><br><span class="line">-n  显示匹配行数据及其行号</span><br></pre></td></tr></table></figure>

<p>25.file | 判断文件类型</p>
<p>26.gzip [-cdtv#] 檔名 | 压缩、解压缩，源文件都不再存在</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-d  进行解压缩</span><br><span class="line">-c  将压缩的数据输出到屏幕上</span><br><span class="line">-v  :显示原档案&#x2F;压缩文件案的压缩比等信息</span><br><span class="line">-#  ：压缩等级，-1最快，但压缩比最差，&#x3D;9最慢，但压缩比最好</span><br></pre></td></tr></table></figure>

<p>27.gunzip | 解压缩</p>
<p>28.bzip2 | 压缩、解压缩</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-d  :解压</span><br><span class="line">-z  :压缩</span><br><span class="line">-k  :保留源文件</span><br><span class="line">-c ：将压缩的过程产生的数据输出到屏幕上！</span><br><span class="line">-v ：可以显示出原档案&#x2F;压缩文件案的压缩比等信息；</span><br><span class="line">-# ：与 gzip 同样的，都是在计算压缩比的参数， -9 最佳， -1 最快！</span><br></pre></td></tr></table></figure>

<p>29.bzcat 读取数据而无需解压</p>
<p>30.tar [主选项+辅选项] 文件或者目录 | 多个目录或档案打包、压缩成一个大档案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">主选项：</span><br><span class="line">   -c  建立打包档案，可搭配 -v 来察看过程中被打包的档名(filename)</span><br><span class="line">   -t  察看打包档案的内容含有哪些档名，重点在察看『档名』就是了；</span><br><span class="line">   -x  解打包或解压缩的功能，可以搭配 -C (大写) 在特定目录解开</span><br><span class="line">辅选项：</span><br><span class="line">   -j  透过 bzip2 的支持进行压缩&#x2F;解压缩：此时档名最好为 *.tar.bz2</span><br><span class="line">   -z  透过 gzip 的支持进行压缩&#x2F;解压缩：此时档名最好为 *.tar.gz</span><br><span class="line">   -v  在压缩&#x2F;解压缩的过程中，将正在处理的文件名显示出来！</span><br><span class="line">   -f filename -f 后面要立刻接要被处理的档名！</span><br><span class="line">   -C 目录   这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。</span><br><span class="line">   --exclude FILE：在压缩打包过程中忽略某文件 eg: tar --exclude &#x2F;home&#x2F;zenghao -zcvf myfile.tar.gz &#x2F;home&#x2F;* &#x2F;etc</span><br><span class="line">   -p  保留备份数据的原本权限与属性，常用于备份(-c)重要的配置文件</span><br><span class="line">   -P(大写）  保留绝对路径，亦即允许备份数据中含有根目录存在之意；</span><br><span class="line">eg:</span><br><span class="line">   压 缩：tar -jcvf filename.tar.bz2 要被压缩的档案或目录名称</span><br><span class="line">   查 询：tar -jtvf filename.tar.bz2</span><br><span class="line">   解压缩：tar -jxvf filename.tar.bz2 -C 欲解压缩的目录</span><br></pre></td></tr></table></figure>

<p>31.exit 退出当前shell </p>
<p>32.logout 退出登录shell </p>
<p>33.shutdown -h now</p>
<p>34.users 显示当前登录系统地用户</p>
<p>35.who 登录在本机的用户与来源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-H或--heading 　显示各栏位的标题信息列。</span><br></pre></td></tr></table></figure>

<p>36.w 登录在本机的用户及其运行的程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-s 　使用简洁格式列表，不显示用户登入时间，终端机阶段作业和程序所耗费的CPU时间。</span><br><span class="line">-h 　不显示各栏位的标题信息列。</span><br></pre></td></tr></table></figure>

<p>37.write 给当前联机的用户发消息</p>
<p>38.wall 给所有登录再本机的用户发消息</p>
<p>39.last 查看用户的登陆日志</p>
<p>40.lastlog 查看每个用户最后的登陆时间</p>
<p>41.finger [选项] [使用者] [用户@主机] | 查看用户信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-s 显示用户的注册名、实际姓名、终端名称、写状态、停滞时间、登录时间等信息</span><br><span class="line">-l 除了用-s选项显示的信息外，还显示用户主目录、登录shell、邮件状态等信息，以及用户主目录下的.plan、.project和.forward文件的内容。</span><br><span class="line">-p 除了不显示.plan文件和.project文件以外，与-l选项相同</span><br></pre></td></tr></table></figure>

<p>42.hostname 查看主机名</p>
<p>43.alias ii = “ls -l” | 添加别名</p>
<p>44.unalias ii | 清除别名</p>
<p>45.useradd [-u UID] [-g 初始群组] [-G 次要群组] [-c 说明栏] [-d 家目录绝对路径] [-s shell] 使用者账号名 | 新增用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-M  不建立用户家目录！(系统账号默认值)</span><br><span class="line">-m  建立用户家目录！(一般账号默认值)</span><br><span class="line">-r  建立一个系统的账号，这个账号的 UID 会有限制 </span><br><span class="line">-e  账号失效日期，格式为『YYYY-MM-DD』</span><br><span class="line">-D  查看useradd的各项默认值</span><br></pre></td></tr></table></figure>

<p>46.passwd | 修改密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-l  使密码失效</span><br><span class="line">-u  与-l相对，用户解锁</span><br><span class="line">-S  列出登陆用户passwd文件内的相关参数</span><br><span class="line">-n  后面接天数，shadow 的第 4 字段，多久不可修改密码天数</span><br><span class="line">-x  后面接天数，shadow 的第 5 字段，多久内必须要更动密码</span><br><span class="line">-w  后面接天数，shadow 的第 6 字段，密码过期前的警告天数</span><br><span class="line">-i  后面接『日期』，shadow 的第 7 字段，密码失效日期</span><br><span class="line">使用管道刘设置密码：echo &quot;zeng&quot; | passwd --stdin zenghao</span><br></pre></td></tr></table></figure>

<p>47.userdel 删除用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-r  用户文件一并删除</span><br></pre></td></tr></table></figure>

<p>48.chage [-ldEImMW] 账号名 | 修改用户密码的相关属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-l  列出该账号的详细密码参数；</span><br><span class="line">-d  后面接日期，修改 shadow 第三字段(最近一次更改密码的日期)，格式YYYY-MM-DD</span><br><span class="line">-E  后面接日期，修改 shadow 第八字段(账号失效日)，格式 YYYY-MM-DD</span><br><span class="line">-I  后面接天数，修改 shadow 第七字段(密码失效日期)</span><br><span class="line">-m  后面接天数，修改 shadow 第四字段(密码最短保留天数)</span><br><span class="line">-M  后面接天数，修改 shadow 第五字段(密码多久需要进行变更)</span><br><span class="line">-W  后面接天数，修改 shadow 第六字段(密码过期前警告日期)</span><br></pre></td></tr></table></figure>

<p>49.usermod [-cdegGlsuLU] username | 修改用户的相关属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-c  后面接账号的说明，即 &#x2F;etc&#x2F;passwd 第五栏的说明栏，可以加入一些账号的说明。</span><br><span class="line">-d  后面接账号的家目录，即修改 &#x2F;etc&#x2F;passwd 的第六栏；</span><br><span class="line">-e  后面接日期，格式是 YYYY-MM-DD 也就是在 &#x2F;etc&#x2F;shadow 内的第八个字段数据啦！</span><br><span class="line">-f  后面接天数为 shadow 的第七字段。</span><br><span class="line">-g  后面接初始群组，修改 &#x2F;etc&#x2F;passwd 的第四个字段，亦即是GID的字段！</span><br><span class="line">-G  后面接次要群组，修改这个使用者能够支持的群组</span><br><span class="line">-l  后面接账号名称。亦即是修改账号名称， &#x2F;etc&#x2F;passwd 的第一栏！</span><br><span class="line">-s  后面接 Shell 的实际档案，例如 &#x2F;bin&#x2F;bash 或 &#x2F;bin&#x2F;csh 等等。</span><br><span class="line">-u  后面接 UID 数字啦！即 &#x2F;etc&#x2F;passwd 第三栏的资料；</span><br><span class="line">-L  冻结密码</span><br><span class="line">-U  解冻密码</span><br></pre></td></tr></table></figure>

<p>50.id [username] | 查看用户相关的id信息，还可以用来判断用户是否存在</p>
<p>51.groups 查看登陆用户支持的群组， 第一个输出的群组为有效群组</p>
<p>52.newgrp 切换有效群组</p>
<p>53.groupadd [-g gid] 组名 | 添加组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-g  设定添加组的特定组id</span><br></pre></td></tr></table></figure>

<p>54.groupmod [-g gid] [-n group_name] 群组名 | 修改组信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-g  修改既有的 GID 数字</span><br><span class="line">-n  修改既有的组名</span><br></pre></td></tr></table></figure>

<p>55.groupdel [groupname] | 删除群组</p>
<p>56.gpasswd | 群组管理员功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root管理员动作：</span><br><span class="line">   -gpasswd groupname 设定密码</span><br><span class="line">   -gpasswd [-A user1,...] [-M user3,...] groupname</span><br><span class="line">       -A  将 groupname 的主控权交由后面的使用者管理(该群组的管理员)</span><br><span class="line">       -M  将某些账号加入这个群组当中</span><br><span class="line">   -gpasswd [-r] groupname</span><br><span class="line">       -r  将 groupname 的密码移除</span><br><span class="line">群组管理员动作：</span><br><span class="line">   - gpasswd [-ad] user groupname </span><br><span class="line">       -a  将某位使用者加入到 groupname 这个群组当中</span><br><span class="line">       -d  将某位使用者移除出 groupname 这个群组当中</span><br></pre></td></tr></table></figure>

<p>57.chfn修改个人信息</p>
<p>58.mount [-t vfstype] [-o options] device dir</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-ro 采用只读方式挂接设备</span><br><span class="line">-rw 采用读写方式挂接设备</span><br><span class="line">eg:mount &#x2F;home&#x2F;mydisk.iso &#x2F;tmp&#x2F;mnt 通过mnt访问mydisk内的内容</span><br></pre></td></tr></table></figure>

<p>59.umount 取消挂载</p>
<p>60.cut</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-b ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。</span><br><span class="line">-c ：以字符为单位进行分割。</span><br><span class="line">-d ：自定义分隔符，默认为制表符。</span><br><span class="line">-f  ：与-d一起使用，指定显示哪个区域。</span><br></pre></td></tr></table></figure>

<p>61.sort</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-n   依照数值的大小排序。</span><br><span class="line">-o&lt;输出文件&gt;   将排序后的结果存入指定的文件。</span><br><span class="line">-r   以相反的顺序来排序。</span><br><span class="line">-t&lt;分隔字符&gt;   指定排序时所用的栏位分隔字符。</span><br><span class="line">-k  选择以哪个区间进行排序。</span><br></pre></td></tr></table></figure>

<p>62.wc 统计指定文件中的字节数、字数、行数, 并将统计结果显示输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-l filename 报告行数</span><br><span class="line">-c filename 报告字节数</span><br><span class="line">-m filename 报告字符数</span><br><span class="line">-w filename 报告单词数</span><br></pre></td></tr></table></figure>

<p>63.uniq 去除文件中相邻的重复行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-c或——count：在每列旁边显示该行重复出现的次数；</span><br><span class="line">-d或--repeated：仅显示重复出现的行列；</span><br><span class="line">-f&lt;栏位&gt;或--skip-fields&#x3D;&lt;栏位&gt;：忽略比较指定的栏位；</span><br><span class="line">-s&lt;字符位置&gt;或--skip-chars&#x3D;&lt;字符位置&gt;：忽略比较指定的字符；</span><br><span class="line">-u或——unique：仅显示出一次的行列；</span><br><span class="line">-w&lt;字符位置&gt;或--check-chars&#x3D;&lt;字符位置&gt;：指定要比较的字符。</span><br></pre></td></tr></table></figure>

<p>64.set 显示环境变量和普通变量 </p>
<p>65.env 显示环境变量 </p>
<p>66.export 把普通变量变成环境变量 </p>
<p>67.unset 删除一个环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aaa()&#123;&#125; 定义函数</span><br></pre></td></tr></table></figure>

<p>68.read</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-p  接提示字符</span><br><span class="line">-t  接等待的秒数</span><br></pre></td></tr></table></figure>

<p>69.declare、typeset</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-i 声明为整数</span><br><span class="line">-a 声明为数组</span><br><span class="line">-f 声明为函数</span><br><span class="line">-r 声明为只读</span><br></pre></td></tr></table></figure>

<p>70.ulimit 限制使用者的某些系统资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-f  此 shell 可以建立的最大档案容量 (一般可能设定为 2GB)单位为 Kbytes eg: ulimit -f 1024 限制使用者仅能建立 1MBytes 以下的容量的档案</span><br></pre></td></tr></table></figure>

<p>71.df [选项] [文件] | 显示指定磁盘文件的可用空间,如果没有文件名被指定，则所有当前被挂载的文件系统的可用空间将被显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-a  显示全部文件系统</span><br><span class="line">-h  文件大小友好显示</span><br><span class="line">-l  只显示本地文件系统</span><br><span class="line">-i  显示inode信息</span><br><span class="line">-T  显示文件系统类型</span><br></pre></td></tr></table></figure>

<p>72.du [选项] [文件] | 显示每个文件和目录的磁盘使用空间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-h  方便阅读的方式</span><br><span class="line">-s  只显示总和的大小</span><br></pre></td></tr></table></figure>

<p>73.ln [参数] [源文件或目录] [目标文件或目录] | 某一个文件在另外一个位置建立一个同步的链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-s  建立软连接   </span><br><span class="line">-v  显示详细的处理过程</span><br></pre></td></tr></table></figure>

<p>74.diff [参数] [文件1或目录1] [文件2或目录2] | 比较单个文件或者目录内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-b 　不检查空格字符的不同。</span><br><span class="line">-B 　不检查空白行。</span><br><span class="line">-i  不检查大小写</span><br><span class="line">-q  仅显示差异而不显示详细信息</span><br><span class="line">eg: diff a b &gt; parch.log 比较两个文件的不同并产生补丁</span><br></pre></td></tr></table></figure>

<p>75.date [参数]… [+格式] | 显示或设定系统的日期与时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">%H 小时(以00-23来表示)。 </span><br><span class="line">%M 分钟(以00-59来表示)。 </span><br><span class="line">%P AM或PM。</span><br><span class="line">%D 日期(含年月日)</span><br><span class="line">%U 该年中的周数。</span><br><span class="line">date -s “2015-10-17 01:01:01″ &#x2F;&#x2F;时间设定</span><br><span class="line">date +%Y%m%d         &#x2F;&#x2F;显示前天年月日</span><br><span class="line">date +%Y%m%d --date&#x3D;&quot;+1 day&#x2F;month&#x2F;year&quot;  &#x2F;&#x2F;显示前一天&#x2F;月&#x2F;年的日期</span><br><span class="line">date +%Y%m%d --date&#x3D;&quot;-1 day&#x2F;month&#x2F;year&quot;  &#x2F;&#x2F;显示后一天&#x2F;月&#x2F;年的日期</span><br><span class="line">date -d &#39;2 weeks&#39; 2周后的日期</span><br></pre></td></tr></table></figure>

<p>76.cal [参数] 月份] [年份] | 查看日历</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-1  显示当月的月历</span><br><span class="line">-3  显示前、当、后一个月的日历</span><br><span class="line">-m  显示星期一为一个星期的第一天</span><br><span class="line">-s  （默认）星期天为第一天</span><br><span class="line">-j  显示当月是一年中的第几天的日历</span><br><span class="line">-y  显示当前年份的日历</span><br></pre></td></tr></table></figure>

<p>77.ps | 列出当前进程的快照</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a   显示所有的进程</span><br><span class="line">-a  显示同一终端下的所有程序</span><br><span class="line">e   显示环境变量</span><br><span class="line">f   显示进程间的关系</span><br><span class="line">-H  显示树状结构</span><br><span class="line">r   显示当前终端的程序</span><br><span class="line">T   显示当前终端的所有程序</span><br><span class="line">-au 显示更详细的信息</span><br><span class="line">-aux    显示所有包含其他使用者的行程 </span><br><span class="line">-u  指定用户的所有进程</span><br></pre></td></tr></table></figure>

<p>78.top [参数] | 显示当前系统正在执行的进程的相关信息，包括进程ID、内存占用率、CPU占用率等</p>
<p>79.kill [参数] [进程号] | 杀死进程</p>
<p>80.free [参数] | 显示linux系统中空闲的、已用的物理内存及swap内存,及被内核使用的buffer</p>
<p>81.vmstat | 对操作系统的虚拟内存、进程、CPU活动进行监控</p>
<p>82.iostat [参数] [时间t] [次数n](每隔t时间刷新一次，最多刷新n次）| 对系统的磁盘操作活动进行监视,汇报磁盘活动统计情况，同时也会汇报出CPU使用情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-p[磁盘] 显示磁盘和分区的情况</span><br></pre></td></tr></table></figure>

<p>83.watch [参数] [命令] |重复执行某一命令以观察变化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-n  时隔多少秒刷新</span><br><span class="line">-d  高亮显示动态变化</span><br></pre></td></tr></table></figure>

<p>84.at [参数] [时间] | 在一个指定的时间执行一个指定任务，只能执行一次</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HH:MM[am|pm] + number [minutes|hours|days|weeks] 强制在某年某月某日的某时刻进行该项任务</span><br><span class="line">atq 查看系统未执行的任务</span><br><span class="line">atrm n 删除编号为n的任务</span><br><span class="line">at -c n 显示编号为n的任务的内容</span><br></pre></td></tr></table></figure>

<p>85.crontab | 定时任务调度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file    载入crontab</span><br><span class="line">-e  编辑某个用户的crontab文件内容</span><br><span class="line">-l  显示某个用户的crontab文件内容</span><br><span class="line">-r  删除某个用户的crontab文件</span><br></pre></td></tr></table></figure>

<p>86.ifconfig [网络设备] [参数] | 查看和配置网络设备</p>
<p>87.route | 显示和操作IP路由表</p>
<p>88.ping [参数] [主机名或IP地址] | 测试与目标主机的连通性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-q  只显示最后的结果</span><br></pre></td></tr></table></figure>

<p>89.netstat | 显示与IP、TCP、UDP和ICMP协议相关的统计数据</p>
<p>90.telnet [参数] [主机] | 用于远程登录，采用明文传送报文，安全性不好</p>
<p>91.rcp [参数] [源文件] [目标文件] | 远程文件拷贝</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-r  递归复制</span><br><span class="line">-p  保留源文件的属性</span><br><span class="line">usage: rcp –r remote_hostname:remote_dir local_dir</span><br></pre></td></tr></table></figure>

<p>92.wget [参数] [URL地址] | 直接从网络上下载文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-o FILE 把记录写到FILE文件中    eg : wget -O a.txt URL</span><br><span class="line">wget --limit-rate&#x3D;300k URL  限速下载</span><br></pre></td></tr></table></figure>

<p>93.awk</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-F 分隔符  以分隔符分隔内容</span><br><span class="line">&#123;&#125;  要执行的脚本内容 eg:cat &#x2F;etc&#x2F;passwd |awk  -F &#39;:&#39;  &#39;&#123;print $1&quot;&quot;$7&#125;&#39;</span><br></pre></td></tr></table></figure>

<p>94.sed 对数据行进行替换、删除、新增、选取等操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a   新增，在新的下一行出现</span><br><span class="line">c   取代，取代 n1,n2 之间的行 eg: sed &#39;1,2c Hi&#39; ab</span><br><span class="line">d   删除</span><br><span class="line">i   插入，在新的上一行出现</span><br></pre></td></tr></table></figure>

<p>95.paste 合并文件，需确保合并的两文件行数相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-d  指定不同于空格或tab键的域分隔符</span><br><span class="line">-s  按行合并，单独一个文件为一行</span><br></pre></td></tr></table></figure>

<p>96.su [参数] user | 切换登陆</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-l  切换时连同环境变量、工作目录一起改变</span><br><span class="line">-c command  执行command变回原来的使用者</span><br></pre></td></tr></table></figure>

<p>97.sudo | 以特定用户的权限执行特定命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-l  列出当前用户可执行的命令</span><br><span class="line">-u username#uid 以指定用户执行命令</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/01/14/clone-graph%EF%BC%88%E5%85%8B%E9%9A%86%E4%B8%80%E4%B8%AA%E5%9B%BE%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/14/clone-graph%EF%BC%88%E5%85%8B%E9%9A%86%E4%B8%80%E4%B8%AA%E5%9B%BE%EF%BC%89/" class="post-title-link" itemprop="url">clone graph（克隆一个图）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-14 20:40:15 / 修改时间：20:46:02" itemprop="dateCreated datePublished" datetime="2019-01-14T20:40:15+08:00">2019-01-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>Clone an undirected graph. Each node in the graph contains a label and a list of its neighbors.</p>
<p><strong>OJ’s undirected graph serialization:</strong></p>
<p>Nodes are labeled uniquely.</p>
<p>We use # as a separator for each node, and,as a separator for node label and each neighbor of the node.</p>
<p>As an example, consider the serialized graph{0,1,2# 1,2# 2,2}.</p>
<p>The graph has a total of three nodes, and therefore contains three parts as separated by#.</p>
<ol>
<li>First node is labeled as0. Connect node0to both nodes1and2.</li>
<li>Second node is labeled as1. Connect node1to node2.</li>
<li>Third node is labeled as2. Connect node2to node2(itself), thus forming a self-cycle.</li>
</ol>
<p>Visually, the graph looks like the following:</p>
<h1 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h1><p>克隆一个无向图。<br>图中的每个节点都包含一个标签和一个邻接表。<br><strong>无向图序列化：</strong><br>节点是唯一标记。<br>我们使用 ＃ 作为每个节点的分隔符，并且作为节点标签的分隔符和节点的每个邻居节点。<br>例如，考虑序列化图{0,1,2＃1,2＃2,2}。<br>该图总共有三个节点，因此包含三个部分，用＃分隔。<br>第一个节点标记为0。 将node0连接到节点1和2。<br>第二个节点标记为1。 将node1连接到node2。<br>第三个节点标记为2。 将node2连接到node2（他自己本身），从而形成自循环。<br>在视觉上，图表如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-dfeb3a43f317fbc5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>使用了BFS算法；<br>算法思想很类似，只是，是将创建节点的过程移动到了处理当前节点的邻接点部分处理了；<br>如果当前节点的某个邻接点不存在， 创建他， 如果存在， 直接更新map对应的新的图的部分。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Definition for undirected graph.</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UndirectedGraphNode</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> label;</span><br><span class="line">	<span class="built_in">vector</span>&lt;UndirectedGraphNode *&gt; neighbors;</span><br><span class="line">	UndirectedGraphNode(<span class="keyword">int</span> x) : label(x) &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">UndirectedGraphNode *<span class="title">cloneGraph</span><span class="params">(UndirectedGraphNode *node)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">// 如果结点为空，直接返回NULL</span></span><br><span class="line">        <span class="comment">// 新的copy的图</span></span><br><span class="line">        UndirectedGraphNode* copy = <span class="keyword">new</span> UndirectedGraphNode(node -&gt; label);</span><br><span class="line">        mp[node] = copy; <span class="comment">// 保存新旧两个图结点的对应关系</span></span><br><span class="line">        <span class="built_in">queue</span>&lt;UndirectedGraphNode*&gt; toVisit;</span><br><span class="line">        toVisit.push(node);</span><br><span class="line">        <span class="keyword">while</span> (!toVisit.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            UndirectedGraphNode* cur = toVisit.front();</span><br><span class="line">            toVisit.pop();</span><br><span class="line">            <span class="comment">// 遍历cur结点的相邻结点</span></span><br><span class="line">            <span class="keyword">for</span> (UndirectedGraphNode* neigh : cur -&gt; neighbors)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="comment">// find();：函数返回一个迭代器指向键值为key的元素，如果没找到就返回指向map尾部的迭代器。</span></span><br><span class="line">            	<span class="comment">// end();：返回指向map末尾的迭代器</span></span><br><span class="line">            	<span class="comment">// 如果在map中没有找到neigh</span></span><br><span class="line">                <span class="keyword">if</span> (mp.<span class="built_in">find</span>(neigh) == mp.<span class="built_in">end</span>())</span><br><span class="line">                &#123;</span><br><span class="line">                	<span class="comment">// map中没有neigh，就创建它</span></span><br><span class="line">                    UndirectedGraphNode* neigh_copy = <span class="keyword">new</span> UndirectedGraphNode(neigh -&gt; label);</span><br><span class="line">                    <span class="comment">// 把新旧两个图的对应关系保存</span></span><br><span class="line">                    mp[neigh] = neigh_copy;</span><br><span class="line">                    <span class="comment">// 把neigh结点入队（以便接下来遍历他的相邻结点）</span></span><br><span class="line">                    toVisit.push(neigh);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 更新当前cur结点的相邻结点的部分</span></span><br><span class="line">                mp[cur] -&gt; neighbors.push_back(mp[neigh]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> copy; </span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">// 无序map，键值都是UndirectedGraphNode*指针类型</span></span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;UndirectedGraphNode*, UndirectedGraphNode*&gt; mp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归的思想来做</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">UndirectedGraphNode *<span class="title">cloneGraph</span><span class="params">(UndirectedGraphNode *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (mp.<span class="built_in">find</span>(node) == mp.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            mp[node] = <span class="keyword">new</span> UndirectedGraphNode(node -&gt; label);</span><br><span class="line">            <span class="keyword">for</span> (UndirectedGraphNode* neigh : node -&gt; neighbors)</span><br><span class="line">                mp[node] -&gt; neighbors.push_back(cloneGraph(neigh));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mp[node];</span><br><span class="line">    &#125; </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;UndirectedGraphNode*, UndirectedGraphNode*&gt; mp;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ylyang999.gitee.io/2019/01/13/binary-tree-level-order-traversal-ii-%EF%BC%88%E4%BA%8C%E5%8F%89%E6%A0%91%E8%87%AA%E4%B8%8B%E5%90%91%E4%B8%8A%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ylyang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨远林的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/13/binary-tree-level-order-traversal-ii-%EF%BC%88%E4%BA%8C%E5%8F%89%E6%A0%91%E8%87%AA%E4%B8%8B%E5%90%91%E4%B8%8A%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%89/" class="post-title-link" itemprop="url">binary tree level order traversal ii)（二叉树自下向上层序遍历）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-01-13 15:51:25 / 修改时间：15:52:28" itemprop="dateCreated datePublished" datetime="2019-01-13T15:51:25+08:00">2019-01-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>Given a binary tree, return the <em>bottom-up level order</em> traversal of its nodes’ values. (ie, from left to right, level by level from leaf to root).</p>
<p>For example:<br>Given binary tree{3,9,20,#,#,15,7},</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-2995afdae0fa6828.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>return its bottom-up level order traversal as:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-74c420bdb40da800.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>confused what”{1,#,2,3}”means? <a href="#">&gt; read more on how binary tree is serialized on OJ.</a></p>
<p><strong>OJ’s Binary Tree Serialization:</strong></p>
<p>The serialization of a binary tree follows a level order traversal, where ‘#’ signifies a path terminator where no node exists below.</p>
<p>Here’s an example:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15108298-60006303e2955b65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>The above binary tree is serialized as”{1,2,3,#,#,4,#,#,5}”.</p>
<h1 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h1><p>实现二叉树自底层向上层的层序遍历。</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>还是二叉树层序遍历的问题，只不过是自下向上；<br>很好解决<br>在C++中，可以用vector，可以实现在vector前边插入：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; &gt; vec; <span class="comment">// 定义二维数组，其中元素为int类型</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; vt; <span class="comment">// 二维数组的新一行</span></span><br><span class="line">vec.insert(vec.<span class="built_in">begin</span>(), vt); <span class="comment">// 在二维数组前面插入新的一行</span></span><br></pre></td></tr></table></figure>
<p>或者在Java中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">res.add(<span class="number">0</span>, list);</span><br></pre></td></tr></table></figure>

<p>也可以实现在二维数组前面插入一行。</p>
<p>但是经过我在用C++的实验，发现先用vec.push_back(vt)的方式，插入，然后最后的时候用swap(vec[i], vec[j])交换一下，不管是空间还是时间，效率更优。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    结构体定义</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    具体实现算法</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> TreeNode* tree;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="title">levelOrderBottom</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; &gt; vec; <span class="comment">// 定义二维数组，其中元素为int类型</span></span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">NULL</span>)<span class="keyword">return</span> vec;</span><br><span class="line">    <span class="built_in">queue</span>&lt;tree&gt; qu; <span class="comment">// 保存二叉树层序遍历结点的指针</span></span><br><span class="line">    qu.push(root); <span class="comment">// 头指针入队</span></span><br><span class="line">    <span class="keyword">while</span>(!qu.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> index = qu.<span class="built_in">size</span>(); <span class="comment">// 本层的结点个数</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; vt; <span class="comment">// 二维数组的新一行</span></span><br><span class="line">        tree now; <span class="comment">// 暂存当前结点</span></span><br><span class="line">        <span class="keyword">while</span>(index--)</span><br><span class="line">        &#123;</span><br><span class="line">            now = qu.front(); <span class="comment">// 暂存当前结点</span></span><br><span class="line">            qu.pop(); <span class="comment">// 出队</span></span><br><span class="line">            vt.push_back(now-&gt;val);</span><br><span class="line">            <span class="keyword">if</span>(now-&gt;left != <span class="literal">NULL</span>)qu.push(now-&gt;left); <span class="comment">// 入队</span></span><br><span class="line">            <span class="keyword">if</span>(now-&gt;right != <span class="literal">NULL</span>)qu.push(now-&gt;right); <span class="comment">// 入队</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果vt不为空，则加入到二维数组的新一行中</span></span><br><span class="line">        <span class="comment">// 其实分析可以发现，vt也不可能为空</span></span><br><span class="line">        <span class="keyword">if</span>(vt.<span class="built_in">size</span>())</span><br><span class="line">            vec.push_back(vt);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 因为自下向上，所以换一下</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,j=vec.<span class="built_in">size</span>()<span class="number">-1</span>; i&lt;j; i++,j--)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(vec[i], vec[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vec;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 二叉树的层序遍历算法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(TreeNode *root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;tree &gt; qu;</span><br><span class="line">    qu.push(root);</span><br><span class="line">    <span class="keyword">while</span>(!qu.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        tree now = qu.front();</span><br><span class="line">        qu.pop();</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;now-&gt;val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span>(now-&gt;left != <span class="literal">NULL</span>)qu.push(now-&gt;left);</span><br><span class="line">        <span class="keyword">if</span>(now-&gt;right != <span class="literal">NULL</span>)qu.push(now-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tree tr;</span><br><span class="line">    tr = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    tree t1;</span><br><span class="line">    t1 = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">    tr-&gt;left = t1;</span><br><span class="line"></span><br><span class="line">    tree t2;</span><br><span class="line">    t2 = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">    tr-&gt;right = t2;</span><br><span class="line"></span><br><span class="line">    tree t3;</span><br><span class="line">    t3 = <span class="keyword">new</span> TreeNode(<span class="number">4</span>);</span><br><span class="line">    t2-&gt;left = t3;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; &gt; vec;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//print(tr);</span></span><br><span class="line"></span><br><span class="line">    vec = levelOrderBottom(tr);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;vec[i].<span class="built_in">size</span>(); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;vec[i][j]&lt;&lt;<span class="string">' '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



        </div>
        

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ylyang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/next-boot.js"></script>


  















  

  

</body>
</html>
